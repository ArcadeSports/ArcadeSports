<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Arcade Sports</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  background:#000;
  font-family:'Press Start 2P',monospace;
  color:#00ff66;
  overflow:hidden;
}

/* APP */
#app{
  height:100vh;
  position:relative;
  border:4px solid #00ff66;
  box-shadow:0 0 25px #00ff66;
}

/* PLAYER */
#playerArea{
  width:100%;
  height:100%;
  position:relative;
}
video{
  width:100%;
  height:100%;
  background:#000;
}

/* OVERLAY */
#overlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  text-shadow:0 0 10px #00ff66;
  font-size:14px;
  cursor:pointer;
}

.hidden{display:none}

/* SCANLINES */
#scanlines{
  pointer-events:none;
  position:absolute;
  inset:0;
  background:linear-gradient(
    rgba(0,0,0,0) 50%,
    rgba(0,0,0,.25) 50%
  );
  background-size:100% 4px;
  opacity:.3;
}

/* HAMBURGER */
#hamburger{
  position:absolute;
  top:12px;
  left:12px;
  z-index:10;
  font-size:18px;
  cursor:pointer;
  background:#000;
  border:2px solid #00ff66;
  padding:8px 12px;
  box-shadow:0 0 10px #00ff66;
}

/* MENU */
#menu{
  position:absolute;
  inset:0;
  background:#000;
  transform:translateX(-100%);
  transition:.25s;
  z-index:9;
  overflow-y:auto;
}
#menu.open{transform:translateX(0)}

.channel{
  padding:18px;
  border-bottom:1px solid #003319;
  cursor:pointer;
}
.channel:hover,
.channel.active{
  background:#00ff66;
  color:#000;
}

/* GLITCH */
.glitch{
  animation:glitch .2s linear 2;
}
@keyframes glitch{
  0%{transform:translate(0)}
  25%{transform:translate(3px,-2px)}
  50%{transform:translate(-3px,2px)}
  75%{transform:translate(2px,1px)}
}
</style>
</head>

<body>
<div id="app">

  <div id="hamburger">☰</div>

  <div id="menu"></div>

  <div id="playerArea">
    <video id="video" muted playsinline></video>
    <div id="overlay">PULSA ☰ PARA CANALES</div>
    <div id="scanlines"></div>
  </div>

</div>

<audio id="beep" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.wav"></audio>

<script>
const channels = {
  "ESPN 1":"https://florcd1.crackstreamslivehd.com/espn/index.m3u8",
  "ESPN 2":"https://99a1.crackstreamslivehd.com/espn2/tracks-v1a1/mono.m3u8",
  "ESPN 3":"https://24a1.crackstreamslivehd.com/espn3/tracks-v1a1/mono.m3u8",
  "ESPN 4":"https://99a1.crackstreamslivehd.com/espn4/tracks-v1a1/mono.m3u8",
  "ESPN 5":"https://pecdl1.crackstreamslivehd.com/espn5/tracks-v1a1/mono.m3u8",
  "ESPN 6":"https://51a1.crackstreamslivehd.com/espn6/tracks-v1a1/mono.m3u8",
  "ESPN 7":"https://57b1.crackstreamslivehd.com/espn7/tracks-v1a1/mono.m3u8",
  "WinSports":"https://98ca2.crackstreamslivehd.com/winsports/tracks-v1a1/mono.m3u8",
   "WinSports Plus":"https://98ca2.crackstreamslivehd.com/winplus/tracks-v1a1/mono.m3u8?ip=190.106.222.109&token=8630ad3ac0753ff5ced6cab3623b6958e95dfb1a-b3-1768202388-1768148388",
  "TyC Sports":"https://24a1.crackstreamslivehd.com/tycinternacional/tracks-v1a1/mono.m3u8",
  "Capo Deportes":"https://d2.merichunidya.com:1686/hls/capodeportes.m3u8"
};

const menu = document.getElementById("menu");
const video = document.getElementById("video");
const overlay = document.getElementById("overlay");
const burger = document.getElementById("hamburger");

let unlocked = false;
let hls = null;
let index = 0;

const keys = Object.keys(channels);

/* BUILD MENU */
keys.forEach((name,i)=>{
  const d = document.createElement("div");
  d.className = "channel";
  d.textContent = name;
  d.onclick = () => play(i);
  menu.appendChild(d);
});

/* MENU TOGGLE */
burger.onclick = () => menu.classList.toggle("open");

/* PLAY */
function play(i){
  index = i;

  document.querySelectorAll(".channel").forEach(c=>c.classList.remove("active"));
  document.querySelectorAll(".channel")[i].classList.add("active");

  menu.classList.remove("open");

  overlay.textContent = unlocked
    ? "CARGANDO..."
    : "TOCA PARA REPRODUCIR";
  overlay.classList.remove("hidden");

  if (hls) {
    hls.destroy();
    hls = null;
  }

  if (Hls.isSupported()) {
    hls = new Hls();

    hls.loadSource(channels[keys[i]]);
    hls.attachMedia(video);

    if (hls) {
  hls.on(Hls.Events.ERROR, (event, data) => {
    if (data.fatal) {
      overlay.textContent = "CANAL NO DISPONIBLE";
      overlay.classList.remove("hidden");
    }
  });
}


  } else {
    video.src = channels[keys[i]];
  }

  localStorage.setItem("lastChannel", i);
}

/* UNLOCK (MÓVIL) */
function unlockPlayer(){
  if (unlocked) return;
  unlocked = true;

  video.muted = false;
  video.play()
    .then(()=>overlay.classList.add("hidden"))
    .catch(()=>{});
}

overlay.addEventListener("click", unlockPlayer);
video.addEventListener("click", unlockPlayer);

/* RESTORE */
const last = localStorage.getItem("lastChannel");
if (last !== null) play(Number(last));
</script>


</body>
</html>
